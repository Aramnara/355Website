<!DOCTYPE html>
<html data-wf-page="5da76d894a6014825c675851" data-wf-site="5d9b93105f6edbb1c729ee4d">
<head>
    <meta charset="utf-8">
    <title>File</title>
    <meta content="File" property="og:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="css/normalize.css" rel="stylesheet" type="text/css">
    <link href="css/webflow.css" rel="stylesheet" type="text/css">
    <link href="css/anthonyramnarain.webflow.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({google: {families: ["Changa One:400,400italic", "Bitter:400,700,400italic"]}});</script>
    <!-- [if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"
            type="text/javascript"></script><![endif] -->
    <script type="text/javascript">!function (o, c) {
        var n = c.documentElement, t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
    }(window, document);</script>
    <link href="images/favicon.jpg" rel="shortcut icon" type="image/x-icon">
    <link href="images/webclip.jpg" rel="apple-touch-icon">
</head>
<body class="body-9">
<div data-collapse="medium" data-animation="default" data-duration="400" class="homenavbar navbar-2 w-nav">
    <div class="w-container">
        <nav role="navigation" class="w-nav-menu"><a href="index.html" class="dropdown-toggle w-nav-link">Home</a>
            <div data-hover="1" data-delay="0" class="w-dropdown">
                <div class="dropdown-toggle w-dropdown-toggle">
                    <div class="w-icon-dropdown-toggle"></div>
                    <div>Course</div>
                </div>
                <nav class="w-dropdown-list"><a href="https://zybooks.com" target="_blank"
                                                class="dropdown-link w-dropdown-link">Zybooks</a><a
                        href="https://tophat.com/" target="_blank" class="dropdown-link w-dropdown-link">TopHat</a><a
                        href="https://drive.google.com/drive/folders/1AsHhIFfQ3yNE_m2z4wswRfKh77K0UH9w" target="_blank"
                        class="dropdown-link w-dropdown-link">Google Drive</a><a href="https://www.w3schools.com/"
                                                                                 target="_blank"
                                                                                 class="dropdown-link w-dropdown-link">W3Schools</a>
                </nav>
            </div>
            <div data-hover="1" data-delay="0" class="w-dropdown">
                <div class="dropdown-link w-dropdown-toggle">
                    <div class="w-icon-dropdown-toggle"></div>
                    <div>Search</div>
                </div>
                <nav class="w-dropdown-list"><a href="file.html" class="dropdown-toggle w-dropdown-link w--current">From
                    File</a><a href="googlesearch.html" class="dropdown-link w-dropdown-link">Google API</a><a
                        href="searchengine.html" class="dropdown-toggle w-dropdown-link">Search Engine</a></nav>
            </div>
            <div data-hover="1" data-delay="0" class="w-dropdown">
                <div class="dropdown-link w-dropdown-toggle">
                    <div class="w-icon-dropdown-toggle"></div>
                    <div>Browser</div>
                </div>
                <nav class="w-dropdown-list"><a href="navigator.html"
                                                class="dropdown-link w-dropdown-link">Navigator</a><a href="window.html"
                                                                                                      class="dropdown-link w-dropdown-link">Window</a><a
                        href="screen.html" class="dropdown-link w-dropdown-link">Screen</a><a href="location.html"
                                                                                              class="dropdown-link w-dropdown-link">Location</a><a
                        href="browser.html" class="dropdown-link w-dropdown-link">Geolocation</a></nav>
            </div>
            <div data-hover="1" data-delay="0" class="w-dropdown">
                <div class="dropdown-link w-dropdown-toggle">
                    <div class="w-icon-dropdown-toggle"></div>
                    <div>About</div>
                </div>
                <nav class="w-dropdown-list"><a href="developer.html" id="Developer"
                                                class="dropdown-link w-dropdown-link">Developer</a><a
                        href="contact.html" class="dropdown-link w-dropdown-link">Contact</a></nav>
            </div>
            <div data-hover="1" data-delay="0" class="w-dropdown">
                <div class="dropdown-link w-dropdown-toggle">
                    <div class="w-icon-dropdown-toggle"></div>
                    <div>Admin</div>
                </div>
                <nav class="w-dropdown-list"><a href="php/indexinglauncher.php" class="dropdown-toggle w-dropdown-link">Indexing
                    Launcher</a><a href="php/searchhistory.php" class="dropdown-link w-dropdown-link">Search History &
                    Stats</a></nav>
            </div>
        </nav>
        <div class="w-nav-button">
            <div class="w-icon-nav-menu"></div>
        </div>
    </div>
</div>
<div class="section-15">
    <div class="container-20 w-container">
        <h1 class="heading-11">Search From File</h1>
        <div class="html-embed-8 w-embed w-script">
            <form id="searchbar" onscroll="fixToTop()" class="example" action="action_page.php">
                <input type="text" disabled="" placeholder="Search and Press Enter" name="search">
                <button disabled="" type="submit"><i class="fa fa-search"></i></button>
            </form>
            <div id="uploadsection">
                <p>Select file to read: </p>
                <input type="file" id="upfile" accept=".csv,.json,.xml">
            </div>
            <div class="results">
            </div>
            <div class="selectors">
                <button type="button" onclick="selectAll()">Select All</button>
                <button type="button" onclick="deselectAll()">Deselect All</button>
            </div>
            <div class="save">
                <button type="button" onclick="writeJSON()">Export JSON</button>
                <button type="button" onclick="writeCSV()">Export CSV</button>
                <button type="button" onclick="writeXML()">Export XML</button>
                <br><br>
                <a style="display: none; width: fit-content;" href="" id="a" download="">Download file</a>
            </div>
            <script>
                window.onload = function () {
                    let fileInput = document.getElementById('upfile');
                    let fileDisplayArea = document.getElementsByClassName('results')[0];
                    fileInput.addEventListener('change', function (e) {
                        let file = fileInput.files[0];
                        let reader = new FileReader();
                        reader.onload = function (e) {
                            let br;
                            let desc;
                            let url;
                            let link;
                            let checkb;
                            let container;
                            let i;
                            let extension = fileInput.value.split(".")[1];
                            let fileText = reader.result;
                            if (extension === "xml") {
                                let parser = new DOMParser();
                                let doc = parser.parseFromString(fileText, "text/xml");
                                let results = doc.getElementsByTagName("result");
                                for (i = 0; i < results.length; i++) {
                                    container = document.createElement("div");
                                    container.className = "result";
                                    checkb = document.createElement("input");
                                    checkb.type = "checkbox";
                                    link = document.createElement("a");
                                    link.href = doc.getElementsByTagName("url")[i].textContent;
                                    link.innerHTML = doc.getElementsByTagName("title")[i].textContent;
                                    url = document.createElement("p");
                                    url.className = "url";
                                    url.innerHTML = doc.getElementsByTagName("url")[i].textContent;
                                    desc = document.createElement("p");
                                    desc.className = "desc";
                                    desc.innerHTML = doc.getElementsByTagName("description")[i].textContent;
                                    br = document.createElement("br");
                                    container.appendChild(checkb);
                                    container.appendChild(link);
                                    container.appendChild(url);
                                    container.appendChild(desc);
                                    container.appendChild(br);
                                    fileDisplayArea.appendChild(container);
                                }
                            } else if (extension === "json") {
                                let obj = JSON.parse(fileText);
                                let results = obj.Result;
                                for (i = 0; i < results.length; i++) {
                                    container = document.createElement("div");
                                    container.className = "result";
                                    checkb = document.createElement("input");
                                    checkb.type = "checkbox";
                                    link = document.createElement("a");
                                    link.href = results[i].url;
                                    link.innerHTML = results[i].title;
                                    url = document.createElement("p");
                                    url.className = "url";
                                    url.innerHTML = results[i].url;
                                    desc = document.createElement("p");
                                    desc.className = "desc";
                                    desc.innerHTML = results[i].description;
                                    br = document.createElement("br");
                                    container.appendChild(checkb);
                                    container.appendChild(link);
                                    container.appendChild(url);
                                    container.appendChild(desc);
                                    container.appendChild(br);
                                    fileDisplayArea.appendChild(container);
                                }
                            } else if (extension === "csv") {
                                var content = fileText.split('\n');
                                for (i = 0; i < content.length; i++) {
                                    var elements = content[i].split(',');
                                    container = document.createElement("div");
                                    container.className = "result";
                                    checkb = document.createElement("input");
                                    checkb.type = "checkbox";
                                    link = document.createElement("a");
                                    link.href = elements[1];
                                    link.innerHTML = elements[0];
                                    url = document.createElement("p");
                                    url.className = "url";
                                    url.innerHTML = elements[1];
                                    desc = document.createElement("p");
                                    desc.className = "desc";
                                    desc.innerHTML = elements[2];
                                    br = document.createElement("br");
                                    container.appendChild(checkb);
                                    container.appendChild(link);
                                    container.appendChild(url);
                                    container.appendChild(desc);
                                    container.appendChild(br);
                                    fileDisplayArea.appendChild(container);
                                }
                            }
                        };
                        reader.readAsText(file);
                    });
                };

                function selectAll() {
                    let results = document.getElementsByClassName("results")[0];
                    let indivResults = results.children;
                    for (var i = 0; i < indivResults.length; i++) {
                        indivResults[i].children[0].checked = true;
                    }
                }

                function deselectAll() {
                    let results = document.getElementsByClassName("results")[0];
                    let indivResults = results.children;
                    for (let i = 0; i < indivResults.length; i++) {
                        indivResults[i].children[0].checked = false;
                    }
                }

                function myFunction() {
                    let x = document.getElementById("myTopnav");
                    if (x.className === "topnav") {
                        x.className += " responsive";
                    } else {
                        x.className = "topnav";
                    }
                }

                function fixToTop() {
                    let x = document.getElementById("searchbar");
                    if (x.className === "example") {
                        x.className += " scrolled";
                    }
                }

                function writeJSON() {
                    let resultsObject = {"Result": []};
                    let name = prompt("Please name your file (without extension): ");
                    name = name + ".json";
                    let results = document.getElementsByClassName("results")[0];
                    let indRes = results.children;
                    for (let i = 0; i < indRes.length; i++) {
                        if (indRes[i].children[0].checked) {
                            let title = indRes[i].children[1].innerHTML;
                            let url = indRes[i].children[2].innerHTML;
                            let description = indRes[i].children[3].innerHTML;
                            let result = {"title": title, "url": url, "description": description};
                            resultsObject["Result"].push(result);
                        }
                    }
                    download(JSON.stringify(resultsObject), name, 'text/plain');
                }

                function writeCSV() {
                    let name = prompt("Please name your file (without extension): ");
                    name = name + ".csv";
                    let results = document.getElementsByClassName("results")[0];
                    let indRes = results.children;
                    let result = "";
                    for (let i = 0; i < indRes.length; i++) {
                        if (indRes[i].children[0].checked) {
                            let title = indRes[i].children[1].innerHTML;
                            title = title.replace(',', '');
                            let url = indRes[i].children[2].innerHTML;
                            url = url.replace(',', '');
                            let description = indRes[i].children[3].innerHTML;
                            description = description.replace(',', '');
                            result = result + title + "," + url + "," + description + "\n";
                        }
                    }
                    result = result.trim();
                    download(result, name, 'text/plain');
                }

                function writeXML() {
                    let name = prompt("Please name your file (without extension): ");
                    name = name + ".xml";
                    let results = document.getElementsByClassName("results")[0];
                    let indRes = results.children;
                    let result = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<results>\n";
                    for (let i = 0; i < indRes.length; i++) {
                        if (indRes[i].children[0].checked) {
                            let title = indRes[i].children[1].innerHTML;
                            title = title.replace(',', '');
                            let url = indRes[i].children[2].innerHTML;
                            url = url.replace(',', '');
                            let description = indRes[i].children[3].innerHTML;
                            description = description.replace(',', '');
                            result = result + "<result>\n<title>" + title + "</title>\n"
                                + "<url>" + url + "</url>\n" + "<description>"
                                + description + "</description>\n</result>\n";
                        }
                    }
                    result += "</results>";
                    download(result, name, 'text/plain');
                }

                function download(text, name, type) {
                    var a = document.getElementById("a");
                    a.style.display = "block";
                    var file = new Blob([text], {type: type});
                    a.href = URL.createObjectURL(file);
                    a.download = name;
                }
            </script>
        </div>
    </div>
</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="js/webflow.js" type="text/javascript"></script>
<!-- [if lte IE 9]>
<script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>